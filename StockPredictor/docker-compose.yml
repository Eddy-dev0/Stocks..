version: '3.9'

services:
  api:
    build:
      context: .
      dockerfile: ui/api/Dockerfile
    environment:
      - STOCK_PREDICTOR_UI_API_KEYS=${STOCK_PREDICTOR_UI_API_KEYS:-}
      - STOCK_PREDICTOR_DEFAULT_TICKER=${STOCK_PREDICTOR_DEFAULT_TICKER:-AAPL}
    ports:
      - "8000:8000"
    volumes:
      - ./:/app

  frontend:
    build:
      context: .
      dockerfile: ui/frontend/Dockerfile
    environment:
      - STOCK_PREDICTOR_API_URL=http://api:8000
      - STOCK_PREDICTOR_DEFAULT_TICKER=${STOCK_PREDICTOR_DEFAULT_TICKER:-AAPL}
      - STOCK_PREDICTOR_UI_API_KEY=${STOCK_PREDICTOR_UI_API_KEYS:-}
    ports:
      - "8501:8501"
    depends_on:
      - api
    volumes:
      - ./:/app
